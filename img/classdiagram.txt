@startuml
hide empty members
hide circle

class Consumer {
    provide_map(): ConceptMap
    handler(): void
}

class ConceptMap

class Node {
    label : StringField
}

ConceptMap "1" *-- "0..*" Node : nodes

class Edge {
    label : StringField
    source : StringField
}

ConceptMap "1" *-- "0..*" Edge : edges
Node "2" o-- "0..*" Edge : from, to

class Flashcard {
    source : StringField
    question : StringField
    answer : StringField
    response_model : ListField(StringField)
}

Edge "0..*" o-- "0..*" Flashcard : edge

class User {
    name : StringField
    birthdate : IntField
    flashmap_condition : BooleanField
    read_sources : ListField(StringField)
    gender : StringField
    code : StringField
    add_test(flashcards, items): void
}

Consumer "1" o-- "1" User : user

class Logentry {
    timestamp : IntField
    data : DictField
    keyword : StringField
}

Logentry "0..*" o-- "1" User : user

class Test {
    generate_test(items, prev_items): list(items)
}

User "1" *-- "0..2" Test : tests

class TestItem {
    question : StringField
    source : StringField
    response_model : ListField(StringField)
}

Test "1" *-- "5" Flashcard : flashcards
Test "1" *-- "5" TestItem : items

class ItemResponse {
    answer : StringField
}

TestItem "1" o-- "0..*" ItemResponse : item

class FlashcardResponse {
    answer : StringField
}

Flashcard "1" o-- "0..*" FlashcardResponse : flashcard

class QuestionnaireItem {
    usefulness : BooleanField
    positive_phrasing : StringField
    negative_phrasing : StringField
}

class Questionnaire {
    good : StringField
    can_be_improved : StringField
    email : EmailField
}
    
User "1" *-- "0..1" Questionnaire : questionnaire

class QuestionnaireResponse {
    answer : IntField
    phrasing : BooleanField
}

Questionnaire "1" *-- "0..*" QuestionnaireResponse : responses
QuestionnaireItem "1" o-- "0..*" QuestionnaireResponse : item

class FlashInstance {
    due_date : IntField
}

class FlashcardInstance

FlashInstance <|.. FlashcardInstance
Flashcard "1" o-- "0..*" FlashcardInstance : flashcard
User "1" *-- "0..*" FlashcardInstance : instances

class FlashmapInstance

FlashInstance <|.. FlashmapInstance
Edge "1" o-- "0..*" FlashmapInstance : edge
User "1" *-- "0..*" FlashmapInstance : instances

class Response {
    start : DateField
    end : DateField
    correct : BooleanField
}

class FlashcardResponse

Response <|.. FlashcardResponse
FlashcardInstance "1" *-- "0..*" FlashcardResponse : responses

class FlashmapResponse

Response <|.. FlashmapResponse
FlashmapInstance "1" *-- "0..*" FlashmapResponse : responses

class Session {
    start : DateField
    end : DateField
    source_prompted : BooleanField
    browser : StringField
}

User "1" *-- "0..*" Session : sessions

@enduml
